"use strict";(self["webpackChunkproyecto_final_vue"]=self["webpackChunkproyecto_final_vue"]||[]).push([[91],{3899:function(t,a,o){o.d(a,{Z:function(){return C}});var r=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"container"},[o("nav",{staticClass:"navbar navbar-expand-lg navbar-light navbar-color"},[o("div",{staticClass:"container-fluid"},[o("button",{staticClass:"btn btn-primary",attrs:{"data-bs-toggle":"modal","data-bs-target":"#carritoModal"}},[o("span",[t._v(t._s(t.getProductosEnCarritoLength))])]),o("h1",[t._v("LoRun")]),o("div",{staticClass:"modal",attrs:{id:"carritoModal",tabindex:"-1",role:"dialog","aria-labelledby":"carritoModalTitulo","aria-hidden":"true"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(0),o("div",{staticClass:"modal-body"},[o("Carrito")],1)])])])])])])},s=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"carritoModalTitulo",attrs:{id:"carritoModalTitulo"}},[t._v("Carrito LoRun")]),o("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[o("span",{attrs:{"aria-hidden":"true"}})])])}],e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("button",{staticClass:"btn btn-danger",on:{click:function(a){return a.preventDefault(),t.VaciarCarrito.apply(null,arguments)}}},[t._v("Vaciar Carrito")]),o("p",[t._v("Para eliminar el producto lleve el contador a 0")]),o("table",{staticClass:"table table-striped table-bordered"},[t._m(0),o("tbody",t._l(t.getProductosEnCarrito,(function(a){return o("tr",{key:a.id,staticClass:"producto"},[o("th",{staticClass:"text-dark",attrs:{scope:"col",colspan:"10"}},[t._v(t._s(a.marca)+" "+t._s(a.modelo))]),o("th",{staticClass:"text-dark",attrs:{scope:"col",colspan:"1"}},[o("button",{on:{click:function(o){return t.Restar(a)}}},[t._v("-")]),t._v(" "+t._s(a.quantity)+" "),o("button",{on:{click:function(o){return t.Sumar(a)}}},[t._v("+")])]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.stock))]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.precio))]),o("th",{staticClass:"text-dark",attrs:{scope:"col"}},[t._v(t._s(a.total))])])})),0),o("tfoot",[o("td",{attrs:{scope:"col",colspan:"10"}}),o("td",{staticClass:"text-dark",attrs:{scope:"col"}},[o("h4",[t._v("Cantidad total: "+t._s(t.totalQuantity))])]),o("td",{attrs:{scope:"col"}}),o("td",{attrs:{scope:"col"}}),o("td",{staticClass:"text-dark",attrs:{scope:"col"}},[o("h5",[t._v("Precio Total: $"+t._s(t.totalFinal))])])])]),t.getProductosEnCarrito?o("div",{staticClass:"btnCompra text-center"},[o("button",{staticClass:"btn btn-dark",on:{click:function(a){return a.preventDefault(),t.Comprar.apply(null,arguments)}}},[t._v("Finalizar compra")])]):t._e()])},c=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("thead",{staticClass:"text-dark"},[o("tr",[o("th",{attrs:{scope:"col",colspan:"10"}},[t._v("Productos")]),o("th",{attrs:{scope:"col",colspan:"1"}},[t._v("Cantidad")]),o("th",{attrs:{scope:"col"}},[t._v("Stock disponible ")]),o("th",{attrs:{scope:"col"}},[t._v(" Unidad $")]),o("th",{attrs:{scope:"col"}},[t._v("Total $")])])])}],i=o(4665),n={name:"Carrito",created(){this.toSetUserLogged(),this.toSetCarrito()},mounted(){this.getUserLogged,this.getProductosEnCarrito},computed:{...(0,i.Se)("carrito",["getProductosEnCarrito","getProdContador"]),...(0,i.Se)("users",["getUserLogged"]),totalQuantity(){return this.getProductosEnCarrito.reduce(((t,a)=>t+a.quantity),0)},totalFinal(){return this.getProductosEnCarrito.reduce(((t,a)=>t+parseInt(a.total)),0)},validarStock(){for(const t of Object.values(this.getProductosEnCarrito))return t.stock-t.quantity},async stockUpdate(){for(const t of Object.values(this.getProductosEnCarrito)){let a=t.id,o={stock:t.stock-t.quantity};await this.$http.put(`https://628e2cc9a339dfef87a8fd8c.mockapi.io/api/producto/${a}`,o).then((t=>t.data)).catch((t=>console.log(t)))}}},methods:{...(0,i.nv)(["toSetStock"]),...(0,i.nv)("carrito",["toVaciarProductos","toSetCarrito","toSetSumar","toSetRestar"]),...(0,i.nv)("users",["toSetUserLogged"]),VaciarCarrito(){this.toVaciarProductos(),localStorage.removeItem("carrito")},RemoveModal(){let t=document.querySelector(".modal-backdrop");null!=t&&t.remove();let a=document.querySelector("body");null!=a&&(a.style=null,a.classList=[])},async Comprar(){if(this.validarStock,!this.getUserLogged)return this.$toastr.warning("Inicia sesion para finalizar la compra");if(this.validarStock<0)return this.$toastr.warning("Verifique que haya stock disponible");if(0==this.getProductosEnCarrito)return this.$toastr.warning("Agrega un producto al carrito");{let t=this.getProductosEnCarrito.map((t=>{let{id:a,marca:o,modelo:r,precio:s,quantity:e,stock:c}=t;return{id:a,marca:o,modelo:r,precio:s,quantity:e,stock:c}}));const a=new Date,o={day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},r={productos:t,quantity:this.totalQuantity,total:this.totalFinal,fecha:a.toLocaleDateString("es-AR",o)};if(await this.$http.post(`https://628e2cc9a339dfef87a8fd8c.mockapi.io/api/corredor/${this.getUserLogged.id}/compras`,r).then((t=>{t.data})).catch((t=>console.log(t))),this.$toastr.success("Compra realizada!"),r){let a=this.validarStock;this.toSetStock({prodCompra:t,stock:a}),this.stockUpdate,localStorage.removeItem("carrito"),this.RemoveModal(),this.$router.push({name:"UsuarioCompras"})}}},Sumar(t){this.toSetSumar(t)},Restar(t){this.toSetRestar(t)}}},l=n,d=o(1001),u=(0,d.Z)(l,e,c,!1,null,"46de2ad2",null),p=u.exports,h={name:"NavBar",components:{Carrito:p},mounted(){this.getProductosEnCarritoLength},methods:{},computed:{...(0,i.Se)("carrito",["getProductosEnCarritoLength"])}},v=h,m=(0,d.Z)(v,r,s,!1,null,"3655dc14",null),C=m.exports},2921:function(t,a,o){o.d(a,{Z:function(){return d}});var r=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"container"},t._l(t.getProductosLista,(function(a,r){return o("div",{key:r,staticClass:"row"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"face front"},[o("img",{staticClass:"card-img-top",attrs:{src:a.img,alt:a.modelo}}),o("h5",{staticClass:"card-title text-dark"},[t._v(t._s(a.marca))]),o("p",{staticClass:"card-text text-dark"},[t._v(t._s(a.modelo))])]),o("div",{staticClass:"face back"},[o("p",{staticClass:"card-text text-dark"},[t._v(t._s(a.marca)+" "+t._s(a.modelo))]),o("p",{staticClass:"card-text text-dark"},[t._v("Weight: "+t._s(a.peso))]),o("p",{staticClass:"card-text text-dark"},[t._v("Drop: "+t._s(a.drop))]),o("p",{staticClass:"card-text text-dark"},[t._v("Precio $"+t._s(a.precio))]),o("p",{staticClass:"card-text text-dark"},[t._v(" Stock: "+t._s(a.stock))]),o("div",{staticClass:"contador"},[o("button",{on:{click:function(o){return t.Restar(a)}}},[t._v("-")]),o("p",[t._v(" "+t._s(a.quantity)+" ")]),o("button",{on:{click:function(o){return t.Sumar(a)}}},[t._v("+")])]),o("button",{staticClass:"btn btn-dark text-center",on:{click:function(o){return t.ProductoAlCarrito(a)}}},[t._v("Agregar al carrito")])])])])])})),0)},s=[],e=o(4665),c={name:"Productos",created(){this.toProductosLista()},computed:{...(0,e.Se)(["getProductosLista"])},methods:{...(0,e.nv)(["toProductosLista","toSetSumarQuantity","toSetRestarQuantity"]),...(0,e.nv)("carrito",["toProductosEnCarrito"]),ProductoAlCarrito(t){this.toProductosEnCarrito(t),this.$toastr.success("Producto agregado!")},Sumar(t){this.toSetSumarQuantity(t)},Restar(t){this.toSetRestarQuantity(t)}}},i=c,n=o(1001),l=(0,n.Z)(i,r,s,!1,null,"a10cd608",null),d=l.exports},4704:function(t,a,o){o.r(a),o.d(a,{default:function(){return p}});var r=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"userview"},[o("NavBar"),o("div",{staticClass:"text-center mb-3"},[o("button",{staticClass:"btn btn-warning mx-5",on:{click:t.DropUser}},[t._v(" Log out")]),o("button",{staticClass:"btn btn-secondary text-center",attrs:{type:"button"},on:{click:t.verCompras}},[t._v("Ver Compras")])]),o("h3",{staticClass:"text-center text-dark"},[t._v("Hola "+t._s(t.getUserLogged.nombre)+"!")]),o("br"),o("Productos")],1)},s=[],e=o(3899),c=o(2921),i=o(4665),n={name:"UsuarioView",components:{Productos:c.Z,NavBar:e.Z},created(){this.toSetUserLogged(),this.toSetCarrito()},mounted(){this.getCarrito,this.getUserLogged},computed:{...(0,i.Se)("users",["getUserLogged"])},methods:{...(0,i.nv)("carrito",["toSetCarrito"]),...(0,i.nv)("users",["toSetUserLogged"]),verCompras(){this.$router.push("/UsuarioCompras")},DropUser(){this.$router.push("/"),localStorage.clear()}}},l=n,d=o(1001),u=(0,d.Z)(l,r,s,!1,null,"dbe411cc",null),p=u.exports}}]);
//# sourceMappingURL=91.241ec825.js.map